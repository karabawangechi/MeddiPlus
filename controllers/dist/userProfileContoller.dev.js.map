{"version":3,"sources":["userProfileContoller.js"],"names":["User","require","path","fs","exports","updateUserProfile","req","res","userId","params","findById","user","status","json","message","body","latitude","longitude","location","coordinates","file","photoPath","join","filename","profilePhoto","save","console","error"],"mappings":";;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,gBAAD,CAApB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,IAAME,EAAE,GAAGF,OAAO,CAAC,IAAD,CAAlB;;AAEAG,OAAO,CAACC,iBAAR,GAA4B,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAElBC,UAAAA,MAFkB,GAETF,GAAG,CAACG,MAAJ,CAAWD,MAFF;AAAA;AAAA,0CAGLR,IAAI,CAACU,QAAL,CAAcF,MAAd,CAHK;;AAAA;AAGlBG,UAAAA,IAHkB;;AAAA,cAKnBA,IALmB;AAAA;AAAA;AAAA;;AAAA,2CAMfJ,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAArB,CANe;;AAAA;AASxB;AACA,cAAIR,GAAG,CAACS,IAAJ,CAASC,QAAT,IAAqBV,GAAG,CAACS,IAAJ,CAASE,SAAlC,EAA6C;AAC3CN,YAAAA,IAAI,CAACO,QAAL,CAAcC,WAAd,GAA4B,CAACb,GAAG,CAACS,IAAJ,CAASC,QAAV,EAAoBV,GAAG,CAACS,IAAJ,CAASE,SAA7B,CAA5B;AACD,WAZuB,CAcxB;;;AACA,cAAIX,GAAG,CAACc,IAAR,EAAc;AACNC,YAAAA,SADM,GACMnB,IAAI,CAACoB,IAAL,CAAU,SAAV,EAAqBhB,GAAG,CAACc,IAAJ,CAASG,QAA9B,CADN;AAEZZ,YAAAA,IAAI,CAACa,YAAL,GAAoBH,SAApB;AACD;;AAlBuB;AAAA,0CAoBlBV,IAAI,CAACc,IAAL,EApBkB;;AAAA;AAqBxBlB,UAAAA,GAAG,CAACM,IAAJ,CAAS;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAAT;AArBwB;AAAA;;AAAA;AAAA;AAAA;AAuBxBY,UAAAA,OAAO,CAACC,KAAR;AACApB,UAAAA,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,YAAAA,OAAO,EAAE;AAAX,WAArB;;AAxBwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA5B","sourcesContent":["const User = require('../models/user');\r\nconst path = require('path');\r\nconst fs = require('fs');\r\n\r\nexports.updateUserProfile = async (req, res) => {\r\n  try {\r\n    const userId = req.params.userId;\r\n    const user = await User.findById(userId);\r\n\r\n    if (!user) {\r\n      return res.status(404).json({ message: 'User not found' });\r\n    }\r\n\r\n    // Update user location\r\n    if (req.body.latitude && req.body.longitude) {\r\n      user.location.coordinates = [req.body.latitude, req.body.longitude];\r\n    }\r\n\r\n    // Upload profile photo\r\n    if (req.file) {\r\n      const photoPath = path.join('uploads', req.file.filename);\r\n      user.profilePhoto = photoPath;\r\n    }\r\n\r\n    await user.save();\r\n    res.json({ message: 'User profile updated successfully' });\r\n  } catch (err) {\r\n    console.error(err);\r\n    res.status(500).json({ message: 'Server Error' });\r\n  }\r\n};"],"file":"userProfileContoller.dev.js"}