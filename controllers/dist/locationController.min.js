"use strict";var axios=require("axios"),User=require("../models/user");exports.detectUserLocation=function(t,o){var n,r,s,a,i,c;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body.phone,e.prev=1,e.next=4,regeneratorRuntime.awrap(axios.post("https://www.googleapis.com/geolocation/v1/geolocate",{considerIp:!1,wifiAccessPoints:[],cellTowers:[{cellId:12345,locationAreaCode:67890,mobileCountryCode:254,mobileNetworkCode:769362302,age:0,signalStrength:-60,timingAdvance:15}]},{headers:{"Content-Type":"application/json",Authorization:"AIzaSyCqVGnU-dhnEsiLy2bFs89d4w349Xt6CQI"}}));case 4:return r=e.sent,s=r.data.location,a=s.lat,i=s.lng,e.next=8,regeneratorRuntime.awrap(User.findOneAndUpdate({phone:n},{location:{coordinates:[i,a]}},{new:!0}));case 8:if(c=e.sent){e.next=11;break}return e.abrupt("return",o.status(404).json({message:"User not found"}));case 11:o.json({message:"User location updated successfully",location:c.location.coordinates}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0),o.status(500).json({message:"Server Error"});case 18:case"end":return e.stop()}},null,null,[[1,14]])};
//# sourceMappingURL=locationController.min.js.map
