{"version":3,"sources":["userProfileContoller.js"],"names":["User","require","path","exports","updateUserProfile","req","res","userId","user","photoPath","regeneratorRuntime","async","_context","prev","next","params","awrap","findById","sent","abrupt","status","json","message","body","latitude","longitude","file","join","filename","profilePhoto","save","t0","console","error","stop"],"mappings":"aAAA,IAAMA,KAAOC,QAAQ,kBACfC,KAAOD,QAAQ,QADfD,GAAOC,QAAQ,MACrBE,QAAUC,kBAAV,SAAAC,EAAAC,GAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAC,KAAA,EACWZ,EAAQI,EAAnBU,OAAAR,OADAK,EAAAE,KAAA,EAAAJ,mBAAAM,MAMuBhB,KAAKiB,SAASV,IANrC,KAAA,EAAA,GAMUC,EANVI,EAAAM,KAAA,CAAAN,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAO,OAAA,SAG4Bb,EAAAc,OAAA,KAAAC,KAAA,CAAAC,QAAA,oBAH5B,KAAA,EAAA,OAG4BjB,EAAAkB,KAAAC,UAAAnB,EAAAkB,KAAAE,YAElBlB,EAAAA,SAASF,YAAWE,CAAAA,EAFFgB,KAAAC,SAAAnB,EAAAkB,KAAAE,YAAApB,EAAAqB,OAGlBlB,EAHkBN,KAAAyB,KAAA,UAAAtB,EAAAqB,KAAAE,UAiBtBpB,EAAKqB,aAAepB,GApB1BG,EAAAE,KAAA,GAAAJ,mBAAAM,MAG4BR,EAAAsB,QAH5B,KAAA,GAG4BxB,EAAAe,KAAA,CAAAC,QAAA,sCAH5BV,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAmB,GAAAnB,EAAA,MAAA,GAG4BoB,QAAAC,MAAArB,EAAAmB,IAMQT,EAAAA,OAAAA,KAAOD,KAAE,CAAAC,QAAA,iBAT7C,KAAA,GAAA,IAAA,MAAA,OAAAV,EAAAsB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA","file":"userProfileContoller.min.js","sourcesContent":["const User = require('../models/user');\r\nconst path = require('path');\r\nconst fs = require('fs');\r\n\r\nexports.updateUserProfile = async (req, res) => {\r\n  try {\r\n    const userId = req.params.userId;\r\n    const user = await User.findById(userId);\r\n\r\n    if (!user) {\r\n      return res.status(404).json({ message: 'User not found' });\r\n    }\r\n\r\n    // Update user location\r\n    if (req.body.latitude && req.body.longitude) {\r\n      user.location.coordinates = [req.body.latitude, req.body.longitude];\r\n    }\r\n\r\n    // Upload profile photo\r\n    if (req.file) {\r\n      const photoPath = path.join('uploads', req.file.filename);\r\n      user.profilePhoto = photoPath;\r\n    }\r\n\r\n    await user.save();\r\n    res.json({ message: 'User profile updated successfully' });\r\n  } catch (err) {\r\n    console.error(err);\r\n    res.status(500).json({ message: 'Server Error' });\r\n  }\r\n};"]}